<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Debug Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-8">
        <h1 class="text-3xl font-bold mb-6 text-gray-800">üîç Blog System Debug Test</h1>
        
        <div id="status" class="mb-6 p-4 bg-yellow-100 border-l-4 border-yellow-500">
            <p class="font-semibold">Testing...</p>
        </div>

        <div id="results" class="space-y-4"></div>
        
        <div class="mt-8 p-4 bg-gray-100 rounded">
            <h3 class="font-bold mb-2">Instructions:</h3>
            <ol class="list-decimal list-inside space-y-2 text-sm">
                <li>Is page ko apne GitHub pe upload karo (test-blog.html naam se)</li>
                <li>Browser mein kholo</li>
                <li>Neeche results dekho</li>
                <li>Screenshot leke mujhe bhejo</li>
            </ol>
        </div>
    </div>

    <script>
        const results = document.getElementById('results');
        const status = document.getElementById('status');
        
        function addResult(title, message, type = 'info') {
            const colors = {
                success: 'bg-green-100 border-green-500 text-green-800',
                error: 'bg-red-100 border-red-500 text-red-800',
                info: 'bg-blue-100 border-blue-500 text-blue-800'
            };
            
            results.innerHTML += `
                <div class="${colors[type]} p-4 border-l-4 rounded">
                    <p class="font-semibold">${title}</p>
                    <p class="text-sm mt-1">${message}</p>
                </div>
            `;
        }

        // Test 1: Current page location
        addResult('üìç Current Page URL', window.location.href, 'info');
        
        // Test 2: Base path
        const basePath = window.location.href.split('/').slice(0, -1).join('/');
        addResult('üìÇ Base Path', basePath, 'info');
        
        // Test 3: Try loading JSON from different paths
        async function testPaths() {
            const pathsToTry = [
                'data/blogs.json',
                '../data/blogs.json',
                './data/blogs.json',
                '/data/blogs.json',
                'blogs.json',
                '../blogs.json'
            ];
            
            status.innerHTML = '<p class="font-semibold">Testing different paths...</p>';
            
            for (const path of pathsToTry) {
                try {
                    addResult(`üîÑ Trying: ${path}`, 'Attempting to fetch...', 'info');
                    
                    const response = await fetch(path);
                    
                    if (response.ok) {
                        const data = await response.json();
                        addResult(
                            `‚úÖ SUCCESS! Path: ${path}`, 
                            `Found ${data.blogs ? data.blogs.length : 0} blogs. Use this path in blog.js!`,
                            'success'
                        );
                        
                        // Show first blog as proof
                        if (data.blogs && data.blogs[0]) {
                            addResult(
                                'üìù First Blog Found',
                                `Title: ${data.blogs[0].title}`,
                                'success'
                            );
                        }
                        
                        status.innerHTML = `
                            <p class="font-semibold text-green-600">‚úÖ SUCCESS!</p>
                            <p class="text-sm mt-1">Working path: <code class="bg-white px-2 py-1 rounded">${path}</code></p>
                        `;
                        return; // Stop on first success
                    } else {
                        addResult(
                            `‚ùå Failed: ${path}`,
                            `HTTP ${response.status} - File not found at this path`,
                            'error'
                        );
                    }
                } catch (error) {
                    addResult(
                        `‚ùå Failed: ${path}`,
                        `Error: ${error.message}`,
                        'error'
                    );
                }
            }
            
            status.innerHTML = `
                <p class="font-semibold text-red-600">‚ùå All paths failed!</p>
                <p class="text-sm mt-1">blogs.json file not found. Check if file exists in data/ folder.</p>
            `;
        }
        
        // Test 4: Check if running locally or on server
        if (window.location.protocol === 'file:') {
            addResult(
                '‚ö†Ô∏è Local File Detected',
                'You are viewing this as a local file. Upload to GitHub or use Live Server for proper testing.',
                'error'
            );
        } else {
            addResult(
                '‚úÖ Server Detected',
                `Running on: ${window.location.protocol}//${window.location.host}`,
                'success'
            );
        }
        
        // Start testing
        setTimeout(testPaths, 1000);
    </script>
</body>
</html>
