<!DOCTYPE html>
<html lang="en">
<head>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5GGQGP06F0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-5GGQGP06F0');
</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-3CEQJ2D9WY"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-3CEQJ2D9WY');</script>
    
    <!-- Primary SEO Meta Tags -->
    <title>Duplicate PDF Pages Online Free — Copy PDF Pages Tool 2026 | Free Tools Hub</title>
    <meta name="title" content="Duplicate PDF Pages Online Free — Copy & Repeat PDF Pages Instantly">
    <meta name="description" content="Free online PDF page duplicator 2026. Copy and repeat specific pages in your PDF documents instantly. No signup, no watermarks. Preview pages before duplicating. 100% secure & browser-based.">
    <meta name="keywords" content="duplicate PDF pages, copy PDF pages, repeat PDF pages, PDF page duplicator, duplicate pages in PDF online, copy PDF pages free, PDF page copier, replicate PDF pages 2026">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="author" content="Free Tools Hub">
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://freetoolshub.online/tools/pdf/duplicate-pdf-pages.html">
    <meta property="og:site_name" content="Free Tools Hub">
    <meta property="og:title" content="Duplicate PDF Pages Online Free — Free Tools Hub">
    <meta property="og:description" content="Copy and repeat specific pages in your PDF instantly. Free, secure, no signup required. Preview pages before duplicating.">
    <meta property="og:image" content="https://freetoolshub.online/images/pdf-duplicator-og.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@freetoolshub">
    <meta name="twitter:title" content="Duplicate PDF Pages Free">
    <meta name="twitter:description" content="Copy & repeat PDF pages instantly. 100% free & secure.">
    <meta name="twitter:image" content="https://freetoolshub.online/images/pdf-duplicator-twitter.jpg">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://freetoolshub.online/tools/utility/pdf-duplicate.html">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../style.css">
    
    <!-- Enhanced Schema Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Duplicate PDF Pages",
        "alternateName": "PDF Page Duplicator",
        "url": "https://freetoolshub.online/tools/pdf/duplicate-pdf-pages.html",
        "description": "Free online tool to duplicate and copy specific pages in PDF documents with preview functionality.",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "browserRequirements": "Requires JavaScript",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD", "availability": "https://schema.org/InStock"},
        "featureList": ["Preview pages", "Duplicate specific pages", "Multiple copies", "Page ranges", "Browser-based", "No upload", "No signup"],
        "aggregateRating": {"@type": "AggregateRating", "ratingValue": "4.9", "ratingCount": "2156", "bestRating": "5"},
        "creator": {"@type": "Organization", "name": "Free Tools Hub", "url": "https://freetoolshub.online"},
        "datePublished": "2026-01-20",
        "dateModified": "2026-02-18"
    }
    </script>
    
    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {"@type":"Question","name":"How do I duplicate PDF pages online?","acceptedAnswer":{"@type":"Answer","text":"Upload your PDF, preview the pages, click the + button on pages you want to duplicate, set the number of copies, and click Duplicate. Your new PDF with duplicated pages will be ready to download instantly."}},
            {"@type":"Question","name":"Is this PDF duplicator completely free?","acceptedAnswer":{"@type":"Answer","text":"Yes, 100% free. No registration, no watermarks, no hidden fees. Use it unlimited times with no restrictions."}},
            {"@type":"Question","name":"Can I preview pages before duplicating?","acceptedAnswer":{"@type":"Answer","text":"Yes! All pages are displayed as thumbnails. You can visually select which pages to duplicate by clicking the + button on each page preview."}},
            {"@type":"Question","name":"Where are duplicated pages inserted?","acceptedAnswer":{"@type":"Answer","text":"Each duplicated page is inserted immediately after its original page, maintaining logical document flow."}},
            {"@type":"Question","name":"Are my PDF files safe?","acceptedAnswer":{"@type":"Answer","text":"Absolutely. All processing happens locally in your browser using PDF-lib. Your files never leave your computer."}}
        ]
    }
    </script>
    
    <style>
        .tool-hero{background:linear-gradient(135deg,#7c3aed,#6d28d9);color:white;padding:64px 0 48px;position:relative;overflow:hidden;}
        .tool-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 60% 70% at 70% 30%,rgba(236,72,153,.18) 0%,transparent 60%);}
        .tool-hero-inner{position:relative;z-index:1;text-align:center;}
        .tool-icon-lg{width:80px;height:80px;background:rgba(255,255,255,.12);backdrop-filter:blur(8px);border-radius:var(--radius-xl);display:flex;align-items:center;justify-content:center;margin:0 auto 24px;font-size:36px;}
        
        .upload-card{background:white;border:1.5px solid var(--gray-200);border-radius:var(--radius-xl);padding:40px;margin-bottom:32px;}
        .upload-zone{border:2px dashed var(--gray-300);border-radius:var(--radius-lg);padding:48px 24px;text-align:center;cursor:pointer;transition:var(--transition);position:relative;}
        .upload-zone:hover,.upload-zone.drag-over{border-color:var(--purple-500);background:rgba(124,58,237,.05);}
        .upload-zone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;}
        .upload-icon{width:72px;height:72px;border-radius:var(--radius-lg);background:rgba(124,58,237,.1);color:var(--purple-600);display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 18px;}
        
        .preview-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:20px;margin-top:32px;}
        .page-thumb{position:relative;border:2px solid var(--gray-200);border-radius:var(--radius-lg);overflow:hidden;cursor:pointer;transition:var(--transition);aspect-ratio:210/297;background:white;}
        .page-thumb:hover{border-color:var(--purple-500);transform:translateY(-2px);box-shadow:var(--shadow-lg);}
        .page-thumb.selected{border-color:var(--purple-600);box-shadow:0 0 0 3px rgba(124,58,237,.2);}
        .page-canvas{width:100%;height:100%;object-fit:contain;}
        .page-num{position:absolute;top:8px;left:8px;background:rgba(0,0,0,.7);color:white;padding:4px 10px;border-radius:var(--radius-full);font-size:11px;font-weight:700;}
        .page-plus{position:absolute;top:8px;right:8px;width:32px;height:32px;background:var(--purple-600);color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;opacity:0;transition:var(--transition);}
        .page-thumb:hover .page-plus{opacity:1;}
        .page-thumb.selected .page-plus{opacity:1;background:var(--success);}
        .page-thumb.selected .page-plus i::before{content:"\f00c";}
        
        .controls-bar{background:var(--purple-50);border:1.5px solid rgba(124,58,237,.2);border-radius:var(--radius-lg);padding:24px;margin-top:32px;}
        .controls-grid{display:grid;grid-template-columns:2fr 1fr 1fr;gap:16px;align-items:end;}
        
        .result-preview{background:white;border:1.5px solid var(--gray-200);border-radius:var(--radius-xl);padding:32px;margin-top:32px;text-align:center;}
        .success-icon{width:72px;height:72px;border-radius:50%;background:#d1fae5;color:var(--success);display:flex;align-items:center;justify-content:center;font-size:32px;margin:0 auto 20px;}
        
        .info-banner{background:var(--purple-50);border-left:4px solid var(--purple-600);padding:16px 20px;border-radius:var(--radius-md);margin-bottom:24px;}
        .info-banner-title{font-weight:700;color:var(--purple-900);margin-bottom:4px;font-size:14px;}
        .info-banner-text{font-size:13px;color:var(--purple-700);}
        
        @media(max-width:768px){.controls-grid{grid-template-columns:1fr;}.preview-grid{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));}}
    </style>
    <link rel="stylesheet" href="../../header-new.css">
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#5b21b6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Free Tools Hub">
    <link rel="apple-touch-icon" href="/icon-192.png">
</head>
<body>

    <div id="site-header"></div>
<script src="../../header.js"></script>

    <div class="breadcrumb" style="background:white;border-bottom:1px solid var(--gray-200);padding:12px 0;"><div class="container"><div style="display:flex;align-items:center;gap:8px;font-size:13px;color:var(--gray-500);">
        <a href="../../index.html" style="color:var(--gray-500);"><i class="fas fa-home"></i> Home</a>
        <span style="color:var(--gray-300);"><i class="fas fa-chevron-right"></i></span>
        <a href="../../tools.html" style="color:var(--gray-500);">Tools</a>
        <span style="color:var(--gray-300);"><i class="fas fa-chevron-right"></i></span>
        <span style="color:var(--gray-800);font-weight:500;">Duplicate PDF Pages</span>
    </div></div></div>

    <section class="tool-hero">
        <div class="container tool-hero-inner">
            <div class="tool-icon-lg"><i class="fas fa-copy"></i></div>
            <div class="hero-badge" style="margin-bottom:16px;"><i class="fas fa-star"></i><span>Free PDF Tool</span></div>
            <h1 style="font-size:clamp(2.2rem,4vw,3.2rem);font-weight:800;letter-spacing:-.03em;margin-bottom:12px;">Duplicate PDF Pages</h1>
            <p style="font-size:1.05rem;opacity:.85;font-weight:300;max-width:560px;margin:0 auto 16px;">Copy and repeat specific pages in your PDF with preview — 100% free & secure</p>
            <div style="display:flex;justify-content:center;gap:16px;flex-wrap:wrap;font-size:13px;opacity:.80;">
                <span><i class="fas fa-check-circle"></i> Preview Pages</span>
                <span><i class="fas fa-check-circle"></i> Visual Selection</span>
                <span><i class="fas fa-check-circle"></i> No Upload</span>
                <span><i class="fas fa-check-circle"></i> 100% Secure</span>
            </div>
        </div>
    </section>

    <main style="background:var(--gray-50);padding:56px 0;">
        <div class="container" style="max-width:1100px;">

            <!-- Upload Card -->
            <div class="upload-card" id="uploadCard">
                <h2 style="font-family:var(--font-display);font-size:1.6rem;font-weight:800;color:var(--gray-900);margin-bottom:28px;text-align:center;display:flex;align-items:center;justify-content:center;gap:12px;">
                    <i class="fas fa-file-pdf" style="color:var(--purple-600);"></i> Upload Your PDF File
                </h2>
                
                <div class="upload-zone" id="uploadZone">
                    <input type="file" id="fileInput" accept=".pdf">
                    <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                    <p style="font-size:18px;font-weight:700;color:var(--gray-800);margin-bottom:8px;">Drop your PDF here</p>
                    <p style="font-size:14px;color:var(--gray-500);">or click to browse • PDF files only • Max 50MB</p>
                </div>
            </div>

            <!-- Preview & Controls Card -->
            <div style="display:none;" id="previewCard">
                
                <div class="info-banner">
                    <div class="info-banner-title"><i class="fas fa-info-circle"></i> How to Duplicate Pages</div>
                    <div class="info-banner-text">Click the <strong>+ button</strong> on any page thumbnail to select it for duplication. Selected pages will show a ✓ checkmark. Set the number of copies below and click Duplicate.</div>
                </div>

                <div style="background:white;border:1.5px solid var(--gray-200);border-radius:var(--radius-xl);padding:32px;">
                    <h3 style="font-family:var(--font-display);font-size:1.4rem;font-weight:800;color:var(--gray-900);margin-bottom:8px;">
                        <i class="fas fa-images" style="color:var(--purple-600);"></i> Preview & Select Pages
                    </h3>
                    <p style="font-size:14px;color:var(--gray-500);margin-bottom:24px;">Document: <strong id="docName">—</strong> • Pages: <strong id="pageCount">0</strong></p>
                    
                    <div class="preview-grid" id="previewGrid"></div>

                    <div class="controls-bar">
                        <div style="margin-bottom:16px;font-size:13px;color:var(--purple-700);font-weight:600;">
                            <i class="fas fa-check-circle"></i> Selected: <span id="selectedCount">0</span> page(s)
                        </div>
                        <div class="controls-grid">
                            <div>
                                <label style="display:block;font-size:12px;font-weight:700;color:var(--gray-700);margin-bottom:6px;text-transform:uppercase;letter-spacing:.06em;">Selected Pages</label>
                                <input type="text" id="selectedPages" readonly style="width:100%;padding:12px 16px;border:1.5px solid var(--gray-300);border-radius:var(--radius-md);font-size:14px;background:white;color:var(--gray-600);" placeholder="Click + on pages above">
                            </div>
                            <div>
                                <label for="numCopies" style="display:block;font-size:12px;font-weight:700;color:var(--gray-700);margin-bottom:6px;text-transform:uppercase;letter-spacing:.06em;">Copies per Page</label>
                                <input type="number" id="numCopies" value="1" min="1" max="10" style="width:100%;padding:12px 16px;border:1.5px solid var(--gray-300);border-radius:var(--radius-md);font-size:14px;">
                            </div>
                            <div>
                                <button class="btn" id="duplicateBtn" onclick="duplicatePages()" style="width:100%;padding:12px 20px;background:linear-gradient(135deg,var(--purple-600),var(--fuchsia-500));color:white;border:none;border-radius:var(--radius-md);font-size:15px;font-weight:700;cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center;gap:8px;">
                                    <i class="fas fa-copy"></i> Duplicate
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Processing -->
            <div style="display:none;text-align:center;padding:60px 20px;" id="processing">
                <div style="width:64px;height:64px;border:4px solid var(--gray-200);border-top-color:var(--purple-600);border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 24px;"></div>
                <h3 style="font-family:var(--font-display);font-size:1.3rem;font-weight:700;color:var(--gray-900);margin-bottom:8px;">Processing your PDF...</h3>
                <p style="font-size:14px;color:var(--gray-500);">Please wait while we duplicate the selected pages</p>
            </div>

            <!-- Download Card -->
            <div class="result-preview" style="display:none;" id="downloadCard">
                <div class="success-icon"><i class="fas fa-check"></i></div>
                <h3 style="font-family:var(--font-display);font-size:1.8rem;font-weight:800;color:var(--gray-900);margin-bottom:12px;">Pages Duplicated Successfully!</h3>
                <p style="font-size:15px;color:var(--gray-600);margin-bottom:28px;">Your PDF has been updated with the duplicated pages and is ready to download.</p>
                
                <button onclick="downloadPDF()" style="display:inline-flex;align-items:center;gap:10px;padding:16px 40px;background:linear-gradient(135deg,var(--success),#0d9488);color:white;border:none;border-radius:var(--radius-full);font-size:17px;font-weight:700;cursor:pointer;box-shadow:0 4px 16px rgba(5,150,105,.3);transition:var(--transition);" onmouseover="this.style.transform='translateY(-2px)';this.style.boxShadow='0 6px 24px rgba(5,150,105,.4)'" onmouseout="this.style.transform='';this.style.boxShadow='0 4px 16px rgba(5,150,105,.3)'">
                    <i class="fas fa-download"></i> Download PDF
                </button>
                
                <div style="margin-top:20px;">
                    <button onclick="resetTool()" style="display:inline-flex;align-items:center;gap:8px;padding:12px 28px;background:var(--gray-100);color:var(--gray-700);border:none;border-radius:var(--radius-full);font-size:14px;font-weight:600;cursor:pointer;transition:var(--transition);" onmouseover="this.style.background='var(--gray-200)'" onmouseout="this.style.background='var(--gray-100)'">
                        <i class="fas fa-redo"></i> Process Another PDF
                    </button>
                </div>
            </div>

        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <div class="site-logo"><div class="logo-icon"><i class="fas fa-bolt"></i></div><div class="logo-text"><span class="logo-name">Free Tools Hub</span></div></div>
                    <p>Your complete hub for 100+ free tools, expert blogs, tech news, educational materials & curated resources.</p>
                    <div class="footer-social" style="margin-top:20px;">
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="https://github.com/freetoolsapp" class="social-icon" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col"><h4>Quick Links</h4><ul>
                    <li><a href="../../index.html"><i class="fas fa-home"></i>Home</a></li>
                    <li><a href="../../tools.html"><i class="fas fa-tools"></i>All Tools</a></li>
                    <li><a href="../../blog.html"><i class="fas fa-pen-nib"></i>Blog</a></li>
                    <li><a href="../../education.html"><i class="fas fa-graduation-cap"></i>Education</a></li>
                    <li><a href="../../contact.html"><i class="fas fa-envelope"></i>Contact</a></li>
                </ul></div>
                <div class="footer-col"><h4>PDF Tools</h4><ul>
                    <li><a href="merge-pdf.html"><i class="fas fa-object-group"></i>Merge PDF</a></li>
                    <li><a href="split-pdf.html"><i class="fas fa-cut"></i>Split PDF</a></li>
                    <li><a href="compress-pdf.html"><i class="fas fa-compress-alt"></i>Compress PDF</a></li>
                    <li><a href="rotate-pdf.html"><i class="fas fa-sync-alt"></i>Rotate PDF</a></li>
                </ul></div>
                <div class="footer-col"><h4>Legal</h4><ul>
                    <li><a href="../../privacy.html"><i class="fas fa-shield-alt"></i>Privacy Policy</a></li>
                    <li><a href="../../terms.html"><i class="fas fa-file-contract"></i>Terms of Service</a></li>
                    <li><a href="../../disclaimer.html"><i class="fas fa-exclamation-circle"></i>Disclaimer</a></li>
                </ul></div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 <a href="../../index.html">Free Tools Hub</a>. All rights reserved. Made with <span class="heart">♥</span> for creators.</p>
                <div class="footer-legal"><a href="../../privacy.html">Privacy</a><a href="../../terms.html">Terms</a><a href="../../disclaimer.html">Disclaimer</a></div>
            </div>
        </div>
    </footer>

    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

    <script>
        const header=document.getElementById('siteHeader');
        window.addEventListener('scroll',()=>header.classList.toggle('scrolled',window.scrollY>20),{passive:true});
        const btn=document.getElementById('mobileMenuBtn'),menu=document.getElementById('mobileMenu');
        btn.addEventListener('click',()=>{const o=menu.classList.toggle('open');btn.setAttribute('aria-expanded',o);btn.innerHTML=o?'<i class="fas fa-times"></i>':'<i class="fas fa-bars"></i>';});
        menu.querySelectorAll('a').forEach(l=>l.addEventListener('click',()=>{menu.classList.remove('open');btn.setAttribute('aria-expanded','false');btn.innerHTML='<i class="fas fa-bars"></i>';}));

        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        let pdfDoc = null;
        let pdfBytes = null;
        let selectedPages = new Set();

        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');

        uploadZone.addEventListener('dragover', e => { e.preventDefault(); uploadZone.classList.add('drag-over'); });
        uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('drag-over'));
        uploadZone.addEventListener('drop', e => {
            e.preventDefault(); uploadZone.classList.remove('drag-over');
            const f = e.dataTransfer.files[0];
            if (f && f.name.endsWith('.pdf')) handleFile(f);
            else alert('⚠️ Please drop a PDF file');
        });

        fileInput.addEventListener('change', e => {
            if (e.target.files[0]) handleFile(e.target.files[0]);
        });

        async function handleFile(file) {
            try {
                document.getElementById('docName').textContent = file.name;
                pdfBytes = await file.arrayBuffer();
                pdfDoc = await PDFLib.PDFDocument.load(pdfBytes);
                const pageCount = pdfDoc.getPageCount();
                document.getElementById('pageCount').textContent = pageCount;

                await renderPreviews(pdfBytes, pageCount);

                document.getElementById('uploadCard').style.display = 'none';
                document.getElementById('previewCard').style.display = 'block';
            } catch(e) {
                alert('❌ Error loading PDF: ' + e.message);
            }
        }

        async function renderPreviews(arrayBuffer, pageCount) {
            const grid = document.getElementById('previewGrid');
            grid.innerHTML = '';

            const pdf = await pdfjsLib.getDocument({data: arrayBuffer}).promise;

            for (let i = 1; i <= pageCount; i++) {
                const page = await pdf.getPage(i);
                const viewport = page.getViewport({scale: 0.5});
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.width = viewport.width;
                canvas.height = viewport.height;

                await page.render({canvasContext: context, viewport: viewport}).promise;

                const thumb = document.createElement('div');
                thumb.className = 'page-thumb';
                thumb.innerHTML = `
                    <div class="page-num">Page ${i}</div>
                    <div class="page-plus"><i class="fas fa-plus"></i></div>
                    <img src="${canvas.toDataURL()}" class="page-canvas" alt="Page ${i}">
                `;
                thumb.onclick = () => togglePage(i, thumb);
                grid.appendChild(thumb);
            }
        }

        function togglePage(pageNum, element) {
            if (selectedPages.has(pageNum)) {
                selectedPages.delete(pageNum);
                element.classList.remove('selected');
            } else {
                selectedPages.add(pageNum);
                element.classList.add('selected');
            }
            updateSelected();
        }

        function updateSelected() {
            const count = selectedPages.size;
            document.getElementById('selectedCount').textContent = count;
            const sorted = Array.from(selectedPages).sort((a,b) => a - b);
            document.getElementById('selectedPages').value = sorted.join(', ');
            document.getElementById('duplicateBtn').disabled = count === 0;
        }

        async function duplicatePages() {
            if (selectedPages.size === 0) {
                alert('⚠️ Please select at least one page to duplicate');
                return;
            }

            const numCopies = parseInt(document.getElementById('numCopies').value);
            if (numCopies < 1 || numCopies > 10) {
                alert('⚠️ Number of copies must be between 1 and 10');
                return;
            }

            document.getElementById('previewCard').style.display = 'none';
            document.getElementById('processing').style.display = 'block';

            try {
                const newPdf = await PDFLib.PDFDocument.create();
                const totalPages = pdfDoc.getPageCount();

                for (let i = 0; i < totalPages; i++) {
                    const [page] = await newPdf.copyPages(pdfDoc, [i]);
                    newPdf.addPage(page);

                    if (selectedPages.has(i + 1)) {
                        for (let j = 0; j < numCopies; j++) {
                            const [dupPage] = await newPdf.copyPages(pdfDoc, [i]);
                            newPdf.addPage(dupPage);
                        }
                    }
                }

                pdfBytes = await newPdf.save();

                setTimeout(() => {
                    document.getElementById('processing').style.display = 'none';
                    document.getElementById('downloadCard').style.display = 'block';
                }, 800);

            } catch(e) {
                alert('❌ Error processing PDF: ' + e.message);
                document.getElementById('processing').style.display = 'none';
                document.getElementById('previewCard').style.display = 'block';
            }
        }

        function downloadPDF() {
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'duplicated-pages.pdf';
            a.click();
            URL.revokeObjectURL(url);
        }

        function resetTool() {
            pdfDoc = null;
            pdfBytes = null;
            selectedPages.clear();
            fileInput.value = '';
            document.getElementById('uploadCard').style.display = 'block';
            document.getElementById('previewCard').style.display = 'none';
            document.getElementById('processing').style.display = 'none';
            document.getElementById('downloadCard').style.display = 'none';
            document.getElementById('numCopies').value = '1';
        }
    </script>
    <style>@keyframes spin{to{transform:rotate(360deg);}}</style>
    <!-- Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js')
            .then(function(reg) { console.log('SW registered'); })
            .catch(function(err) { console.log('SW error:', err); });
        });
      }
    </script>
</body>
</html>
