<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5GGQGP06F0"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-5GGQGP06F0');</script>
    
    <!-- Primary SEO Meta Tags -->
    <title>Crop PDF Pages Online Free ‚Äî Visual PDF Cropping Tool 2026 | Free Tools Hub</title>
    <meta name="title" content="Crop PDF Pages Online Free ‚Äî Interactive PDF Cropper with Visual Selection">
    <meta name="description" content="Crop PDF pages online free with visual drag-and-drop tool 2026. Remove margins, trim white space, resize PDF pages instantly. No signup, no watermarks, 50MB max. Interactive crop selector ‚Äî works on mobile & desktop. 100% browser-based & private.">
    <meta name="keywords" content="crop PDF, crop PDF pages, crop PDF online free, PDF cropper tool, trim PDF margins, remove PDF margins, cut PDF pages, resize PDF, visual PDF crop, interactive PDF cropper 2026">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="author" content="Free Tools Hub">
    <meta name="language" content="English">
    
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://freetoolshub.online/tools/pdf/crop-pdf-pages.html">
    <meta property="og:title" content="Crop PDF Pages Online Free ‚Äî Visual Selection Tool">
    <meta property="og:description" content="Crop PDF pages with drag-and-drop selector. Free, no signup, visual preview. Trim margins instantly.">
    
    <!-- Canonical -->
    <link rel="canonical" href="https://freetoolshub.online/tools/utility/crop-pdf-pages.html">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    
    <!-- Schema -->
    <script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebApplication","name":"Crop PDF Pages","url":"https://freetoolshub.online/tools/pdf/crop-pdf-pages.html","description":"Free visual PDF cropping tool.","applicationCategory":"UtilityApplication","operatingSystem":"Any","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"creator":{"@type":"Organization","name":"Free Tools Hub","url":"https://freetoolshub.online"}}
    </script>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;500;600;700;800&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../../style.css">
    
    <!-- PDF.js & PDF-lib -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    
    <style>
        .tool-hero{background:linear-gradient(135deg,#7c3aed,#6d28d9);color:white;padding:64px 0 48px;position:relative;overflow:hidden;}
        .tool-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse 60% 70% at 70% 30%,rgba(236,72,153,.18) 0%,transparent 60%);}
        .tool-hero-inner{position:relative;z-index:1;text-align:center;}
        .tool-icon-lg{width:80px;height:80px;background:rgba(255,255,255,.12);backdrop-filter:blur(8px);border-radius:20px;display:flex;align-items:center;justify-content:center;margin:0 auto 24px;font-size:36px;}
        
        .upload-card{background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:40px;margin-bottom:32px;}
        .upload-zone{border:2px dashed #d1d5db;border-radius:12px;padding:56px 24px;text-align:center;cursor:pointer;transition:all .2s;position:relative;}
        .upload-zone:hover,.upload-zone.drag-over{border-color:#7c3aed;background:rgba(124,58,237,.05);}
        /* Full-area input for mobile */
        .upload-zone input{position:absolute;inset:0;opacity:0;cursor:pointer;width:100%;height:100%;font-size:16px;}
        .upload-icon{width:80px;height:80px;border-radius:16px;background:rgba(124,58,237,.1);color:#7c3aed;display:flex;align-items:center;justify-content:center;font-size:36px;margin:0 auto 20px;}
        
        .crop-container{background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:32px;margin-bottom:32px;display:none;}
        .crop-container.active{display:block;}
        
        /* Canvas wrapper ‚Äî must be inline-block so the crop-box absolute positioning works */
        .preview-canvas-wrap{position:relative;display:inline-block;border:2px solid #d1d5db;border-radius:8px;overflow:hidden;background:#f3f4f6;max-width:100%;}
        .preview-canvas{display:block;max-width:100%;height:auto;}
        
        .crop-box{position:absolute;border:3px solid #7c3aed;box-shadow:0 0 0 9999px rgba(0,0,0,.4);cursor:move;background:transparent;touch-action:none;user-select:none;}
        .crop-box::before{content:'';position:absolute;inset:-3px;border:3px dashed rgba(255,255,255,.5);pointer-events:none;}
        
        .crop-handle{position:absolute;width:20px;height:20px;background:white;border:2px solid #7c3aed;border-radius:50%;}
        .crop-handle.tl{top:-10px;left:-10px;cursor:nwse-resize;}
        .crop-handle.tr{top:-10px;right:-10px;cursor:nesw-resize;}
        .crop-handle.bl{bottom:-10px;left:-10px;cursor:nesw-resize;}
        .crop-handle.br{bottom:-10px;right:-10px;cursor:nwse-resize;}
        
        .info-banner{background:#f5f3ff;border-left:4px solid #7c3aed;padding:16px 20px;border-radius:8px;margin-bottom:24px;}
        .info-banner-text{font-size:14px;color:#4c1d95;line-height:1.6;}
        
        .processing-overlay{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);display:none;align-items:center;justify-content:center;z-index:1000;}
        .processing-overlay.active{display:flex;}
        .processing-card{background:white;border-radius:16px;padding:48px;text-align:center;max-width:420px;box-shadow:0 25px 50px rgba(0,0,0,.25);}
        .spinner{width:64px;height:64px;border:4px solid #e5e7eb;border-top-color:#7c3aed;border-radius:50%;animation:spin .8s linear infinite;margin:0 auto 24px;}
        
        .related-tools{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:32px;}
        .related-tool{background:#f9fafb;border:1.5px solid #e5e7eb;border-radius:12px;padding:20px;text-align:center;text-decoration:none;transition:all .2s;display:block;}
        .related-tool:hover{border-color:#7c3aed;transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.08);}
        .related-tool-icon{width:48px;height:48px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:22px;margin:0 auto 12px;}
        .related-tool-title{font-weight:700;font-size:14px;color:#1f2937;margin-bottom:6px;}
        .related-tool-desc{font-size:12px;color:#6b7280;}
        
        @media(max-width:768px){
            .related-tools{grid-template-columns:1fr;}
            .preview-canvas-wrap{max-width:100%;margin:0 auto;}
            .crop-handle{width:24px;height:24px;}
            .crop-handle.tl{top:-12px;left:-12px;}
            .crop-handle.tr{top:-12px;right:-12px;}
            .crop-handle.bl{bottom:-12px;left:-12px;}
            .crop-handle.br{bottom:-12px;right:-12px;}
        }
        @keyframes spin{to{transform:rotate(360deg);}}
    </style>
    <link rel="stylesheet" href="../../header-new.css">
    <!-- PWA -->
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#5b21b6">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Free Tools Hub">
    <link rel="apple-touch-icon" href="/icon-192.png">
</head>
<body>

    <div id="site-header"></div>
    <script src="../../header.js"></script>

    <div class="breadcrumb" style="background:white;border-bottom:1px solid #e5e7eb;padding:12px 0;">
        <div class="container">
            <div style="display:flex;align-items:center;gap:8px;font-size:13px;color:#6b7280;">
                <a href="../../index.html" style="color:#6b7280;"><i class="fas fa-home"></i> Home</a>
                <span style="color:#d1d5db;"><i class="fas fa-chevron-right"></i></span>
                <a href="../../tools.html" style="color:#6b7280;">Tools</a>
                <span style="color:#d1d5db;"><i class="fas fa-chevron-right"></i></span>
                <span style="color:#111827;font-weight:500;">Crop PDF Pages</span>
            </div>
        </div>
    </div>

    <section class="tool-hero">
        <div class="container tool-hero-inner">
            <div class="tool-icon-lg"><i class="fas fa-crop-alt"></i></div>
            <h1 style="font-size:clamp(2.2rem,4vw,3.2rem);font-weight:800;letter-spacing:-.03em;margin-bottom:12px;">Crop PDF Pages</h1>
            <p style="font-size:1.05rem;opacity:.85;font-weight:300;max-width:560px;margin:0 auto 16px;">Trim PDF margins with visual crop selector ‚Äî drag, resize & crop instantly</p>
            <div style="display:flex;justify-content:center;gap:16px;flex-wrap:wrap;font-size:13px;opacity:.80;">
                <span><i class="fas fa-check-circle"></i> Visual Selector</span>
                <span><i class="fas fa-check-circle"></i> Drag & Resize</span>
                <span><i class="fas fa-check-circle"></i> Live Preview</span>
                <span><i class="fas fa-check-circle"></i> 100% Free</span>
            </div>
        </div>
    </section>

    <main style="background:#f9fafb;padding:56px 0;">
        <div class="container" style="max-width:1000px;">

            <!-- Upload Card -->
            <div class="upload-card" id="uploadCard">
                <h2 style="font-size:1.6rem;font-weight:800;color:#111827;margin-bottom:28px;text-align:center;display:flex;align-items:center;justify-content:center;gap:12px;">
                    <i class="fas fa-file-pdf" style="color:#7c3aed;"></i> Upload Your PDF File
                </h2>
                <div class="upload-zone" id="uploadZone">
                    <input type="file" id="fileInput" accept=".pdf,application/pdf">
                    <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                    <p style="font-size:19px;font-weight:700;color:#1f2937;margin-bottom:8px;">Drop your PDF here</p>
                    <p style="font-size:14px;color:#6b7280;">or click to browse ‚Ä¢ PDF files only ‚Ä¢ Max 50MB</p>
                </div>
                <p id="uploadErr" style="display:none;color:#dc2626;text-align:center;margin-top:12px;font-size:14px;font-weight:600;"></p>
            </div>

            <!-- Crop Selection Card -->
            <div class="crop-container" id="cropCard">
                
                <div class="info-banner">
                    <div class="info-banner-text"><i class="fas fa-info-circle"></i> <strong>How to crop:</strong> Drag the purple box to select the area you want to keep. Resize by dragging the corner handles. Click "Crop PDF" when ready.</div>
                </div>

                <h3 style="font-size:1.4rem;font-weight:800;color:#111827;margin-bottom:8px;text-align:center;">
                    <i class="fas fa-crop-alt" style="color:#7c3aed;"></i> Select Crop Area
                </h3>
                <p style="font-size:14px;color:#6b7280;text-align:center;margin-bottom:32px;">Drag and resize the purple box to select the area to keep</p>

                <div style="text-align:center;margin-bottom:32px;overflow-x:auto;">
                    <div class="preview-canvas-wrap" id="canvasWrap">
                        <canvas id="pdfCanvas" class="preview-canvas"></canvas>
                        <div class="crop-box" id="cropBox">
                            <div class="crop-handle tl" data-handle="tl"></div>
                            <div class="crop-handle tr" data-handle="tr"></div>
                            <div class="crop-handle bl" data-handle="bl"></div>
                            <div class="crop-handle br" data-handle="br"></div>
                        </div>
                    </div>
                </div>

                <div style="background:#f9fafb;border:1.5px solid #e5e7eb;border-radius:8px;padding:16px;margin-bottom:24px;">
                    <div style="display:grid;grid-template-columns:repeat(2,1fr);gap:16px;font-size:13px;">
                        <div><span style="color:#6b7280;font-weight:500;">Document:</span> <strong id="docName">‚Äî</strong></div>
                        <div><span style="color:#6b7280;font-weight:500;">Total Pages:</span> <strong id="totalPages">0</strong></div>
                        <div><span style="color:#6b7280;font-weight:500;">Crop Width:</span> <strong id="cropWidth">0</strong> px</div>
                        <div><span style="color:#6b7280;font-weight:500;">Crop Height:</span> <strong id="cropHeight">0</strong> px</div>
                    </div>
                </div>

                <div style="text-align:center;display:flex;gap:16px;justify-content:center;flex-wrap:wrap;">
                    <button id="cropBtn" style="display:inline-flex;align-items:center;gap:10px;padding:16px 40px;background:linear-gradient(135deg,#7c3aed,#c026d3);color:white;border:none;border-radius:999px;font-size:17px;font-weight:700;cursor:pointer;box-shadow:0 4px 16px rgba(124,58,237,.3);transition:all .2s;">
                        <i class="fas fa-crop-alt"></i> Crop PDF
                    </button>
                    <button id="resetCropBtn" style="display:inline-flex;align-items:center;gap:8px;padding:14px 32px;background:#f3f4f6;color:#374151;border:none;border-radius:999px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s;">
                        <i class="fas fa-redo"></i> Reset Selection
                    </button>
                    <button id="newFileBtn" style="display:inline-flex;align-items:center;gap:8px;padding:14px 32px;background:#f3f4f6;color:#374151;border:none;border-radius:999px;font-size:15px;font-weight:600;cursor:pointer;transition:all .2s;">
                        <i class="fas fa-upload"></i> New File
                    </button>
                </div>
            </div>

            <!-- Processing Overlay -->
            <div class="processing-overlay" id="processingOverlay">
                <div class="processing-card">
                    <div class="spinner"></div>
                    <h3 style="font-size:1.3rem;font-weight:700;color:#111827;margin-bottom:8px;">Cropping PDF...</h3>
                    <p style="font-size:14px;color:#6b7280;">Please wait while we process your PDF</p>
                </div>
            </div>

            <!-- Features Section -->
            <div style="background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:40px;margin-top:40px;">
                <h2 style="font-size:1.8rem;font-weight:800;color:#111827;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #ede9fe;">
                    <i class="fas fa-star" style="color:#7c3aed;"></i> Why Use Our PDF Cropper?
                </h2>
                <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin:24px 0;">
                    <div style="background:#f9fafb;border:1.5px solid #e5e7eb;border-radius:12px;padding:24px 20px;text-align:center;">
                        <div style="font-size:32px;margin-bottom:12px;">üéØ</div>
                        <div style="font-weight:700;font-size:14px;color:#1f2937;margin-bottom:6px;">Visual Selection</div>
                        <div style="font-size:13px;color:#6b7280;line-height:1.6;">Drag and resize crop box to select exact area visually</div>
                    </div>
                    <div style="background:#f9fafb;border:1.5px solid #e5e7eb;border-radius:12px;padding:24px 20px;text-align:center;">
                        <div style="font-size:32px;margin-bottom:12px;">‚ö°</div>
                        <div style="font-weight:700;font-size:14px;color:#1f2937;margin-bottom:6px;">Instant Processing</div>
                        <div style="font-size:13px;color:#6b7280;line-height:1.6;">Browser-based cropping in seconds, no upload required</div>
                    </div>
                    <div style="background:#f9fafb;border:1.5px solid #e5e7eb;border-radius:12px;padding:24px 20px;text-align:center;">
                        <div style="font-size:32px;margin-bottom:12px;">üîí</div>
                        <div style="font-weight:700;font-size:14px;color:#1f2937;margin-bottom:6px;">100% Private</div>
                        <div style="font-size:13px;color:#6b7280;line-height:1.6;">All processing happens locally in your browser</div>
                    </div>
                </div>
            </div>

            <!-- How It Works -->
            <div style="background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:40px;margin-top:32px;">
                <h2 style="font-size:1.8rem;font-weight:800;color:#111827;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #ede9fe;">
                    <i class="fas fa-list-ol" style="color:#7c3aed;"></i> How to Crop PDF Pages
                </h2>
                <div style="display:flex;flex-direction:column;gap:0;">
                    <div style="display:flex;gap:16px;align-items:flex-start;padding:20px 0;border-bottom:1px solid #f3f4f6;">
                        <div style="width:36px;height:36px;border-radius:50%;flex-shrink:0;background:#7c3aed;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;">1</div>
                        <div style="padding-top:4px;">
                            <div style="font-weight:700;font-size:15px;color:#1f2937;margin-bottom:4px;">Upload Your PDF File</div>
                            <div style="font-size:14px;color:#4b5563;line-height:1.7;">Click the upload area or drag and drop your PDF file. We support files up to 50MB in size.</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:16px;align-items:flex-start;padding:20px 0;border-bottom:1px solid #f3f4f6;">
                        <div style="width:36px;height:36px;border-radius:50%;flex-shrink:0;background:#7c3aed;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;">2</div>
                        <div style="padding-top:4px;">
                            <div style="font-weight:700;font-size:15px;color:#1f2937;margin-bottom:4px;">Select Crop Area Visually</div>
                            <div style="font-size:14px;color:#4b5563;line-height:1.7;">Drag the purple crop box to position it. Resize by dragging the corner handles.</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:16px;align-items:flex-start;padding:20px 0;border-bottom:1px solid #f3f4f6;">
                        <div style="width:36px;height:36px;border-radius:50%;flex-shrink:0;background:#7c3aed;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;">3</div>
                        <div style="padding-top:4px;">
                            <div style="font-weight:700;font-size:15px;color:#1f2937;margin-bottom:4px;">Crop All Pages</div>
                            <div style="font-size:14px;color:#4b5563;line-height:1.7;">Click "Crop PDF". The selection applies to all pages automatically.</div>
                        </div>
                    </div>
                    <div style="display:flex;gap:16px;align-items:flex-start;padding:20px 0;">
                        <div style="width:36px;height:36px;border-radius:50%;flex-shrink:0;background:#7c3aed;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:16px;">4</div>
                        <div style="padding-top:4px;">
                            <div style="font-weight:700;font-size:15px;color:#1f2937;margin-bottom:4px;">Download Cropped PDF</div>
                            <div style="font-size:14px;color:#4b5563;line-height:1.7;">Your cropped PDF downloads automatically. All unwanted margins removed.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ -->
            <div style="background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:40px;margin-top:32px;">
                <h2 style="font-size:1.8rem;font-weight:800;color:#111827;margin-bottom:20px;padding-bottom:16px;border-bottom:2px solid #ede9fe;">
                    <i class="fas fa-question-circle" style="color:#7c3aed;"></i> Frequently Asked Questions
                </h2>
                <div style="display:flex;flex-direction:column;gap:12px;">
                    <div style="border:1.5px solid #e5e7eb;border-radius:12px;overflow:hidden;">
                        <div style="padding:18px 20px;cursor:pointer;font-weight:700;font-size:15px;color:#1f2937;background:#fff;" onclick="var n=this.nextElementSibling;n.style.display=n.style.display==='block'?'none':'block'">
                            How do I crop PDF pages online for free? <i class="fas fa-chevron-down" style="float:right;color:#7c3aed;font-size:12px;"></i>
                        </div>
                        <div style="display:none;padding:0 20px 18px;font-size:14px;color:#4b5563;line-height:1.8;background:#f9fafb;border-top:1px solid #e5e7eb;">
                            Upload your PDF, drag the purple crop box, resize with corner handles, click "Crop PDF". 100% free, no signup.
                        </div>
                    </div>
                    <div style="border:1.5px solid #e5e7eb;border-radius:12px;overflow:hidden;">
                        <div style="padding:18px 20px;cursor:pointer;font-weight:700;font-size:15px;color:#1f2937;background:#fff;" onclick="var n=this.nextElementSibling;n.style.display=n.style.display==='block'?'none':'block'">
                            Can I crop all pages at once? <i class="fas fa-chevron-down" style="float:right;color:#7c3aed;font-size:12px;"></i>
                        </div>
                        <div style="display:none;padding:0 20px 18px;font-size:14px;color:#4b5563;line-height:1.8;background:#f9fafb;border-top:1px solid #e5e7eb;">
                            Yes! The crop selection applies to all pages automatically.
                        </div>
                    </div>
                    <div style="border:1.5px solid #e5e7eb;border-radius:12px;overflow:hidden;">
                        <div style="padding:18px 20px;cursor:pointer;font-weight:700;font-size:15px;color:#1f2937;background:#fff;" onclick="var n=this.nextElementSibling;n.style.display=n.style.display==='block'?'none':'block'">
                            Are my PDF files safe? <i class="fas fa-chevron-down" style="float:right;color:#7c3aed;font-size:12px;"></i>
                        </div>
                        <div style="display:none;padding:0 20px 18px;font-size:14px;color:#4b5563;line-height:1.8;background:#f9fafb;border-top:1px solid #e5e7eb;">
                            Yes. All processing is in your browser. Files never leave your device.
                        </div>
                    </div>
                </div>
            </div>

            <!-- Related PDF Tools -->
            <div style="background:white;border:1.5px solid #e5e7eb;border-radius:16px;padding:32px;margin-top:40px;">
                <h3 style="font-size:1.4rem;font-weight:800;color:#111827;margin-bottom:24px;text-align:center;">
                    <i class="fas fa-tools" style="color:#7c3aed;"></i> Related PDF Tools
                </h3>
                <div class="related-tools">
                    <a href="merge-pdf.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#dbeafe;color:#2563eb;"><i class="fas fa-object-group"></i></div>
                        <div class="related-tool-title">Merge PDF</div>
                        <div class="related-tool-desc">Combine multiple PDFs</div>
                    </a>
                    <a href="split-pdf.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#fee2e2;color:#dc2626;"><i class="fas fa-cut"></i></div>
                        <div class="related-tool-title">Split PDF</div>
                        <div class="related-tool-desc">Extract pages from PDF</div>
                    </a>
                    <a href="rotate-pdf.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#ede9fe;color:#7c3aed;"><i class="fas fa-sync-alt"></i></div>
                        <div class="related-tool-title">Rotate PDF</div>
                        <div class="related-tool-desc">Change page orientation</div>
                    </a>
                    <a href="compress-pdf.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#dcfce7;color:#16a34a;"><i class="fas fa-compress-alt"></i></div>
                        <div class="related-tool-title">Compress PDF</div>
                        <div class="related-tool-desc">Reduce PDF file size</div>
                    </a>
                    <a href="delete-pdf-pages.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#fed7aa;color:#ea580c;"><i class="fas fa-trash-alt"></i></div>
                        <div class="related-tool-title">Delete Pages</div>
                        <div class="related-tool-desc">Remove unwanted pages</div>
                    </a>
                    <a href="duplicate-pdf-pages.html" class="related-tool">
                        <div class="related-tool-icon" style="background:#fce7f3;color:#ec4899;"><i class="fas fa-copy"></i></div>
                        <div class="related-tool-title">Duplicate Pages</div>
                        <div class="related-tool-desc">Copy and repeat pages</div>
                    </a>
                </div>
            </div>

        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-brand">
                    <div class="site-logo"><div class="logo-icon"><i class="fas fa-bolt"></i></div><div class="logo-text"><span class="logo-name">Free Tools Hub</span></div></div>
                    <p>Your complete hub for 100+ free tools, expert blogs, educational materials & curated resources.</p>
                    <div class="footer-social" style="margin-top:20px;">
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="https://github.com/freetoolsapp" class="social-icon" target="_blank" rel="noopener"><i class="fab fa-github"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-col"><h4>Quick Links</h4><ul>
                    <li><a href="../../index.html"><i class="fas fa-home"></i>Home</a></li>
                    <li><a href="../../tools.html"><i class="fas fa-tools"></i>All Tools</a></li>
                    <li><a href="../../blog.html"><i class="fas fa-pen-nib"></i>Blog</a></li>
                    <li><a href="../../contact.html"><i class="fas fa-envelope"></i>Contact</a></li>
                </ul></div>
                <div class="footer-col"><h4>PDF Tools</h4><ul>
                    <li><a href="crop-pdf-pages.html"><i class="fas fa-crop-alt"></i>Crop PDF</a></li>
                    <li><a href="merge-pdf.html"><i class="fas fa-object-group"></i>Merge PDF</a></li>
                    <li><a href="split-pdf.html"><i class="fas fa-cut"></i>Split PDF</a></li>
                    <li><a href="compress-pdf.html"><i class="fas fa-compress-alt"></i>Compress PDF</a></li>
                </ul></div>
                <div class="footer-col"><h4>Legal</h4><ul>
                    <li><a href="../../privacy.html"><i class="fas fa-shield-alt"></i>Privacy Policy</a></li>
                    <li><a href="../../terms.html"><i class="fas fa-file-contract"></i>Terms of Service</a></li>
                    <li><a href="../../disclaimer.html"><i class="fas fa-exclamation-circle"></i>Disclaimer</a></li>
                </ul></div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2026 <a href="../../index.html">Free Tools Hub</a>. All rights reserved. Made with <span class="heart">‚ô•</span> for creators.</p>
                <div class="footer-legal"><a href="../../privacy.html">Privacy</a><a href="../../terms.html">Terms</a><a href="../../disclaimer.html">Disclaimer</a></div>
            </div>
        </div>
    </footer>

    <script>
        // ‚îÄ‚îÄ PDF.js worker ‚îÄ‚îÄ
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        // ‚îÄ‚îÄ Safe mobile menu ‚îÄ‚îÄ
        function initMobileMenu() {
            var btn  = document.getElementById('mobileMenuBtn');
            var menu = document.getElementById('mobileMenu');
            if (!btn || !menu || btn._ready) return;
            btn._ready = true;
            btn.addEventListener('click', function() {
                var open = menu.classList.toggle('open');
                btn.setAttribute('aria-expanded', open);
                btn.innerHTML = open ? '<i class="fas fa-times"></i>' : '<i class="fas fa-bars"></i>';
            });
            menu.querySelectorAll('a').forEach(function(l) {
                l.addEventListener('click', function() {
                    menu.classList.remove('open');
                    btn.setAttribute('aria-expanded', 'false');
                    btn.innerHTML = '<i class="fas fa-bars"></i>';
                });
            });
        }
        initMobileMenu();
        setTimeout(initMobileMenu, 300);
        setTimeout(initMobileMenu, 1000);
        setTimeout(initMobileMenu, 2500);

        // ‚îÄ‚îÄ State ‚îÄ‚îÄ
        var pdfLibDoc   = null;
        var pdfBytes    = null;
        var pdfJsPage   = null;   // rendered PDF.js page (for scale calc)
        var canvasScale = 1.5;    // render scale used for preview

        var cropData = { x:0, y:0, width:0, height:0 };
        var isDragging   = false;
        var isResizing   = false;
        var resizeHandle = null;
        var dragStart    = { x:0, y:0 };

        var uploadZone = document.getElementById('uploadZone');
        var fileInput  = document.getElementById('fileInput');
        var canvas     = document.getElementById('pdfCanvas');
        var ctx        = canvas.getContext('2d');
        var cropBox    = document.getElementById('cropBox');

        // ‚îÄ‚îÄ Drag & Drop ‚îÄ‚îÄ
        uploadZone.addEventListener('dragover', function(e) { e.preventDefault(); uploadZone.classList.add('drag-over'); });
        uploadZone.addEventListener('dragleave', function() { uploadZone.classList.remove('drag-over'); });
        uploadZone.addEventListener('drop', function(e) {
            e.preventDefault();
            uploadZone.classList.remove('drag-over');
            var f = e.dataTransfer && e.dataTransfer.files[0];
            if (f) pick(f);
        });

        // ‚îÄ‚îÄ File input (mobile trigger) ‚îÄ‚îÄ
        fileInput.addEventListener('change', function(e) {
            var f = e.target.files && e.target.files[0];
            if (f) {
                pick(f);
                try { fileInput.value = ''; } catch(ex){}
            }
        });

        function showErr(msg) {
            var el = document.getElementById('uploadErr');
            el.textContent = msg;
            el.style.display = 'block';
            setTimeout(function(){ el.style.display='none'; }, 4000);
        }

        function pick(file) {
            var isPDF = file.type === 'application/pdf' ||
                        (file.name && file.name.toLowerCase().endsWith('.pdf'));
            if (!isPDF) { showErr('‚ö†Ô∏è Please upload a PDF file only.'); return; }
            if (file.size > 50 * 1024 * 1024) { showErr('‚ö†Ô∏è File too large. Maximum 50MB.'); return; }
            handleFile(file);
        }

        async function handleFile(file) {
            try {
                // Keep a fresh copy ‚Äî PDF-lib and PDF.js each need their own
                var buf1 = await file.arrayBuffer();
                pdfBytes = buf1;

                pdfLibDoc = await PDFLib.PDFDocument.load(pdfBytes);

                document.getElementById('docName').textContent    = file.name;
                document.getElementById('totalPages').textContent  = pdfLibDoc.getPageCount();

                await renderFirstPage(pdfBytes.slice(0)); // fresh copy for PDF.js
                initCropBox();

                document.getElementById('uploadCard').style.display = 'none';
                document.getElementById('cropCard').classList.add('active');
                document.getElementById('cropCard').scrollIntoView({behavior:'smooth', block:'start'});

            } catch(err) {
                showErr('‚ùå Error loading PDF: ' + err.message);
                console.error(err);
            }
        }

        async function renderFirstPage(buf) {
            var pdf  = await pdfjsLib.getDocument({data: buf}).promise;
            pdfJsPage = await pdf.getPage(1);

            var viewport = pdfJsPage.getViewport({scale: canvasScale});
            canvas.width  = viewport.width;
            canvas.height = viewport.height;

            await pdfJsPage.render({canvasContext: ctx, viewport: viewport}).promise;
        }

        function initCropBox() {
            var margin = 40;
            cropData = {
                x:      margin,
                y:      margin,
                width:  canvas.width  - margin * 2,
                height: canvas.height - margin * 2
            };
            updateCropBox();
            updateCropInfo();
        }

        function updateCropBox() {
            cropBox.style.left   = cropData.x      + 'px';
            cropBox.style.top    = cropData.y      + 'px';
            cropBox.style.width  = cropData.width  + 'px';
            cropBox.style.height = cropData.height + 'px';
        }

        function updateCropInfo() {
            document.getElementById('cropWidth').textContent  = Math.round(cropData.width);
            document.getElementById('cropHeight').textContent = Math.round(cropData.height);
        }

        // ‚îÄ‚îÄ Helper: get coords relative to canvas ‚îÄ‚îÄ
        function getRelCoords(clientX, clientY) {
            var rect = canvas.getBoundingClientRect();
            // canvas may be CSS-scaled differently from its pixel size
            var scaleX = canvas.width  / rect.width;
            var scaleY = canvas.height / rect.height;
            return {
                x: (clientX - rect.left)  * scaleX,
                y: (clientY - rect.top)   * scaleY
            };
        }

        // ‚îÄ‚îÄ Mouse: drag ‚îÄ‚îÄ
        cropBox.addEventListener('mousedown', function(e) {
            if (e.target.dataset.handle) return; // handled by handle listener
            isDragging = true;
            dragStart = { x: e.clientX - cropData.x, y: e.clientY - cropData.y };
            e.preventDefault();
        });

        // ‚îÄ‚îÄ Mouse: resize handles ‚îÄ‚îÄ
        cropBox.querySelectorAll('.crop-handle').forEach(function(h) {
            h.addEventListener('mousedown', function(e) {
                isResizing   = true;
                resizeHandle = h.dataset.handle;
                e.stopPropagation();
                e.preventDefault();
            });
        });

        document.addEventListener('mousemove', function(e) {
            if (!isDragging && !isResizing) return;
            var pos = getRelCoords(e.clientX, e.clientY);

            if (isDragging) {
                var newX = e.clientX - dragStart.x;
                var newY = e.clientY - dragStart.y;
                // dragStart was set in screen coords so we clamp in screen space too
                // but cropData is in canvas pixel space ‚Äî recalculate properly
                var rect   = canvas.getBoundingClientRect();
                var scaleX = canvas.width  / rect.width;
                var scaleY = canvas.height / rect.height;
                var cx = (e.clientX - dragStart.x);
                var cy = (e.clientY - dragStart.y);
                // dragStart stored screen offset; convert to canvas coords
                // Actually easier: just track dragStart as canvas-relative offset
                cropData.x = Math.max(0, Math.min(cx, canvas.width  - cropData.width));
                cropData.y = Math.max(0, Math.min(cy, canvas.height - cropData.height));
            } else {
                applyResize(pos.x, pos.y);
            }
            updateCropBox();
            updateCropInfo();
        });

        document.addEventListener('mouseup', function() { isDragging=false; isResizing=false; resizeHandle=null; });

        // ‚îÄ‚îÄ Touch: drag ‚îÄ‚îÄ
        cropBox.addEventListener('touchstart', function(e) {
            if (e.target.dataset.handle) return;
            isDragging = true;
            var t   = e.touches[0];
            var pos = getRelCoords(t.clientX, t.clientY);
            dragStart = { x: pos.x - cropData.x, y: pos.y - cropData.y };
            e.preventDefault();
        }, {passive:false});

        // ‚îÄ‚îÄ Touch: resize handles ‚îÄ‚îÄ
        cropBox.querySelectorAll('.crop-handle').forEach(function(h) {
            h.addEventListener('touchstart', function(e) {
                isResizing   = true;
                resizeHandle = h.dataset.handle;
                e.stopPropagation();
                e.preventDefault();
            }, {passive:false});
        });

        document.addEventListener('touchmove', function(e) {
            if (!isDragging && !isResizing) return;
            e.preventDefault();
            var t   = e.touches[0];
            var pos = getRelCoords(t.clientX, t.clientY);

            if (isDragging) {
                cropData.x = Math.max(0, Math.min(pos.x - dragStart.x, canvas.width  - cropData.width));
                cropData.y = Math.max(0, Math.min(pos.y - dragStart.y, canvas.height - cropData.height));
            } else {
                applyResize(pos.x, pos.y);
            }
            updateCropBox();
            updateCropInfo();
        }, {passive:false});

        document.addEventListener('touchend', function() { isDragging=false; isResizing=false; resizeHandle=null; });

        function applyResize(mx, my) {
            var MIN = 50;
            if (resizeHandle === 'br') {
                cropData.width  = Math.max(MIN, Math.min(mx - cropData.x, canvas.width  - cropData.x));
                cropData.height = Math.max(MIN, Math.min(my - cropData.y, canvas.height - cropData.y));
            } else if (resizeHandle === 'tr') {
                var newY = Math.max(0, Math.min(my, cropData.y + cropData.height - MIN));
                cropData.height = cropData.y + cropData.height - newY;
                cropData.y      = newY;
                cropData.width  = Math.max(MIN, Math.min(mx - cropData.x, canvas.width - cropData.x));
            } else if (resizeHandle === 'bl') {
                var newX = Math.max(0, Math.min(mx, cropData.x + cropData.width - MIN));
                cropData.width  = cropData.x + cropData.width - newX;
                cropData.x      = newX;
                cropData.height = Math.max(MIN, Math.min(my - cropData.y, canvas.height - cropData.y));
            } else if (resizeHandle === 'tl') {
                var newX2 = Math.max(0, Math.min(mx, cropData.x + cropData.width  - MIN));
                var newY2 = Math.max(0, Math.min(my, cropData.y + cropData.height - MIN));
                cropData.width  = cropData.x + cropData.width  - newX2;
                cropData.height = cropData.y + cropData.height - newY2;
                cropData.x      = newX2;
                cropData.y      = newY2;
            }
        }

        // ‚îÄ‚îÄ Fix drag: use canvas-relative dragStart ‚îÄ‚îÄ
        // Override mousedown to use canvas-relative coords for dragging
        cropBox.addEventListener('mousedown', function(e) {
            if (e.target.dataset.handle) return;
            isDragging = true;
            var pos = getRelCoords(e.clientX, e.clientY);
            dragStart = { x: pos.x - cropData.x, y: pos.y - cropData.y };
            e.preventDefault();
        });

        // Override mousemove drag logic (canvas-relative)
        document.addEventListener('mousemove', function(e) {
            if (!isDragging && !isResizing) return;
            var pos = getRelCoords(e.clientX, e.clientY);

            if (isDragging) {
                cropData.x = Math.max(0, Math.min(pos.x - dragStart.x, canvas.width  - cropData.width));
                cropData.y = Math.max(0, Math.min(pos.y - dragStart.y, canvas.height - cropData.height));
            } else {
                applyResize(pos.x, pos.y);
            }
            updateCropBox();
            updateCropInfo();
        });

        // ‚îÄ‚îÄ Reset & New File buttons ‚îÄ‚îÄ
        document.getElementById('resetCropBtn').addEventListener('click', initCropBox);
        document.getElementById('newFileBtn').addEventListener('click', function() {
            pdfLibDoc = null; pdfBytes = null; pdfJsPage = null;
            try { fileInput.value = ''; } catch(ex){}
            document.getElementById('cropCard').classList.remove('active');
            document.getElementById('uploadCard').style.display = 'block';
            window.scrollTo({top:0,behavior:'smooth'});
        });

        // ‚îÄ‚îÄ Crop & Download ‚îÄ‚îÄ
        document.getElementById('cropBtn').addEventListener('click', async function() {
            if (!pdfLibDoc) return;

            document.getElementById('processingOverlay').classList.add('active');

            try {
                // Scale: ratio of PDF page points to canvas pixels
                var pdfPage   = pdfLibDoc.getPage(0);
                var pdfW      = pdfPage.getWidth();
                var pdfH      = pdfPage.getHeight();
                var scaleX    = pdfW  / canvas.width;
                var scaleY    = pdfH  / canvas.height;

                // PDF coordinate system: origin bottom-left, Y inverted
                var cropX     = cropData.x      * scaleX;
                var cropY     = (canvas.height - cropData.y - cropData.height) * scaleY;
                var cropW     = cropData.width  * scaleX;
                var cropH     = cropData.height * scaleY;

                // Clamp to page bounds
                cropX = Math.max(0, cropX);
                cropY = Math.max(0, cropY);
                cropW = Math.min(cropW, pdfW  - cropX);
                cropH = Math.min(cropH, pdfH  - cropY);

                var pages = pdfLibDoc.getPages();
                pages.forEach(function(page) {
                    page.setCropBox(cropX, cropY, cropW, cropH);
                    page.setMediaBox(cropX, cropY, cropW, cropH);
                });

                var outBytes = await pdfLibDoc.save();
                var blob     = new Blob([outBytes], {type:'application/pdf'});
                var url      = URL.createObjectURL(blob);
                var a        = document.createElement('a');
                a.href       = url;
                a.download   = 'cropped-pdf.pdf';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);

                setTimeout(function() {
                    document.getElementById('processingOverlay').classList.remove('active');
                    alert('‚úÖ PDF cropped successfully! Download started.');
                }, 500);

            } catch(err) {
                alert('‚ùå Error cropping PDF: ' + err.message);
                console.error(err);
                document.getElementById('processingOverlay').classList.remove('active');
            }
        });
    </script>

    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function() { console.log('SW registered'); })
                    .catch(function(err) { console.log('SW error:', err); });
            });
        }
    </script>
</body>
</html>
